@model List<Eureka_Forbes.Models.ProductMaster.ProductViewModel>
@{
    ViewData["Title"] = "Product Models & Steps";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@* @using Eureka_Forbes.Models.ProductMaster
@{
    ViewData["Title"] = "ProductMaster";

    Layout = "~/Views/Shared/_Layout.cshtml";

    var stepsList = ViewBag.stepsList as List<Steps>;
}
 *@

<h2 class="text-center mt-3">Product Models & Steps</h2>

<div class="container mt-4">
    <div class="accordion" id="productAccordion">
        @if (Model != null && Model.Any())
        {
            @foreach (var product in Model)
            {
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading-@product.ProductId">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-@product.ProductId">
                            <strong>@product.ProductName</strong>
                        </button>
                    </h2>
                    <div id="collapse-@product.ProductId" class="accordion-collapse collapse" data-bs-parent="#productAccordion">
                        <div class="accordion-body">
                            @if (product.Models.Any())
                            {
                                <div class="list-group">
                                    @foreach (var modelm in product.Models)
                                    {
                                        <div class="list-group-item">
                                            <h5 class="mb-1">@modelm.ModelName</h5>
                                            @if (modelm.Steps.Any())
                                            {
                                                <table class="table table-bordered mt-2">
                                                    <thead class="table-dark">
                                                        <tr>
                                                            <th>Priority</th>
                                                            <th>Step Name</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var step in modelm.Steps.OrderBy(s => s.Priority))
                                                        {
                                                            <tr>
                                                                <td>@step.Priority</td>
                                                                <td>@step.StepName</td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            }
                                            else
                                            {
                                                <p class="text-muted">No steps assigned.</p>
                                            }
                                        </div>
                                    }
                                </div>
                            }
                            else
                            {
                                <p class="text-muted">No models available.</p>
                            }
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <p class="text-center text-danger">No Products Found.</p>
        }
    </div>
</div>

<!-- Bootstrap 5 for styling -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
